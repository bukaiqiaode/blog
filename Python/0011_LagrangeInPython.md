# Python中使用拉格朗日插值法

 在数据分析(数据预处理--数据清洗)中，原始数据中可能出现缺失值。处理缺失值的一个策略是进行插补，拉格朗日插值法是一种常用的方法。<br />
 出于学习的目的，我实验了python中应用拉格朗日插值法。
 
## 第一组实验
假定有有11个数，其中第6个缺失了，我们用拉格朗日插值法来插补。
```python
# -*- coding: UTF-8 -*-

import pandas as pd
from scipy.interpolate import lagrange

x  = [1, 2, 3, 4, 5, 7, 8, 9, 10, 11]
y  = [3193.4, 3075.4, 2847.6, 2311.4, 2327.3, 2616.6, 2620.2, 2616.4, 2655.8, 2310.7]
print fxy(6)
```
得到fxy(6) = 2541.66，和其他的数据比较，还是可以接受的。

## 第二组实验
还是这组数据，但是我们对x的取值进行修改，然后重新计算插值
```python
# -*- coding: UTF-8 -*-

import pandas as pd
from scipy.interpolate import lagrange

x  = [139, 140, 141, 142, 143, 145, 146, 147, 148, 149]
y  = [3193.4, 3075.4, 2847.6, 2311.4, 2327.3, 2616.6, 2620.2, 2616.4, 2655.8, 2310.7]
print fxy(144)
```
得到的fxy(144) = -75744.0，再和其他的数据相比，就不是那么合理了。假如y数组代表的是某11天内的销售数据，插补出来一个负数是个啥意思？

## 龙格现象
指的是使用多项式对某函数进行逼近的时候，某些情况下会在函数图像的两端产生剧烈的波动。<br />
在我们的实验中，虽然不是在两端，但确实看到了数据的剧烈'波动'，或者'震荡'。<br />
用人话来描述，就是给定一些观测到的数值"当x=某某时，y观测到等于某某"，通过拉格朗日插值法，构造出一个函数，使得这个函数的图形，通过所有'以观测值为坐标的点'<br />
然后，我们就想当然地认为，这个函数就体现了我们研究的这种现象的规律，用这个函数，我们就能进行预测了。<br />
但是，这个函数有时候不太好用，它的图像可能很奔放，但恰恰又能通过我们观测到的那些点。<br />
在这种情况下，我们相信这个函数，并用它进行预测的时候，可能就会'踩'到某些奔放的位置上，得到诡异的结果。

## 怎么应对
- 观测值是客观事实，我们应该尊重。<br />
- 从上面的实验可以看到，x的取值会对计算出来的插值产生巨大的影响。因此我们需要合理、科学地选择x的取值，来降低风险。<br />
- 当计算出插值后，在数据量允许的情况下，要尽可能地对插值进行分析，从业务的角度看计算出的数值是否合理。
- 寻求使用其他插值方法

## 参考资料
- http://www.doc88.com/p-979313349475.html
- https://baike.baidu.com/item/%E9%BE%99%E6%A0%BC%E7%8E%B0%E8%B1%A1
